# =============================================================================
# Environment Configuration
# =============================================================================

# -----------------------------------------------------------------------------
# Application URLs
# -----------------------------------------------------------------------------
VERCEL_URL=http://localhost:5173

# -----------------------------------------------------------------------------
# Database (Neon PostgreSQL)
# -----------------------------------------------------------------------------
# Local development: Use Docker Postgres
# Production: Use Neon pooled connection string
# Format: postgres://user:password@host:port/database?sslmode=require&pooling=true
DATABASE_URL="postgres://root:mysecretpassword@localhost:5433/local"

# Optional: Force Neon serverless driver (auto-detected in production)
# USE_NEON_SERVERLESS="true"

# -----------------------------------------------------------------------------
# Redis
# -----------------------------------------------------------------------------
UPSTASH_REDIS_REST_URL="https://your-region.upstash.io"
UPSTASH_REDIS_REST_TOKEN="your-token-here"

# -----------------------------------------------------------------------------
# Authentication (Better Auth)
# -----------------------------------------------------------------------------
# Generate a secure secret: openssl rand -base64 32
BETTER_AUTH_SECRET="your-secret-here"

# -----------------------------------------------------------------------------
# Encryption
# -----------------------------------------------------------------------------
# Generate a secure encryption key using: openssl rand -base64 32
#
# This key encrypts sensitive credentials
# using AES-256-GCM with HKDF key derivation.
#
# Encryption Format: [version(1)][salt(16)][iv(12)][ciphertext + auth_tag]
#   - Version byte enables future algorithm upgrades
#   - Random salt per value prevents rainbow table attacks
#   - HKDF key derivation optimized for high-entropy keys
#   - AES-256-GCM provides authenticated encryption
#
# Security Requirements:
#   - Minimum 32 bytes (256 bits) - REQUIRED
#   - Must be cryptographically random
#   - Never commit this key to version control
#   - Backup securely - if lost, encrypted data cannot be recovered
#
# WARNING: Changing this key will make existing encrypted data unreadable!
#
ENCRYPTION_KEY="your-encryption-key-here"

# -----------------------------------------------------------------------------
# AI / LLM Integration
# -----------------------------------------------------------------------------
OPENAI_API_KEY="your-openai-api-key-here"

# -----------------------------------------------------------------------------
# Web Push Notifications (VAPID Keys)
# -----------------------------------------------------------------------------
# Generate VAPID keys: pnpm dlx web-push generate-vapid-keys
# These keys allow your server to send push notifications to browsers
PUBLIC_VAPID_KEY=""
VAPID_KEY=""
VAPID_SUBJECT="mailto:vapid@emitkit.com"

# -----------------------------------------------------------------------------
# Tinybird (Events & Analytics)
# -----------------------------------------------------------------------------
# Get token from Tinybird Console: https://ui.tinybird.co/tokens
# To get your token locally, run: tb token copy "admin local_testing@tinybird.co" && TB_LOCAL_TOKEN=$(pbpaste)
TINYBIRD_TOKEN="your-tinybird-token-here"
TINYBIRD_API_URL="https://api.tinybird.co"

# -----------------------------------------------------------------------------
# Upstash Workflow - For durable, reliable background workflows
# -----------------------------------------------------------------------------
# QStash enables durable execution of event-triggered side effects:
# - Push notifications with automatic retries
#
# Production Setup:
# 1. Get credentials from: https://console.upstash.com/qstash
# 2. Add the three keys below to your deployment platform (Vercel, etc.)
# 3. Deploy - workflows automatically become durable with retries
#
# Local Development:
# 1. Install CLI: pnpm add -D @upstash/qstash-cli
# 2. Start local QStash: npx @upstash/qstash-cli dev
# 3. Copy QSTASH_URL and QSTASH_TOKEN from CLI output
# 4. Add QSTASH_URL to .env (only needed for local development)
#
# Required for both local and production:
QSTASH_TOKEN=your-token-here
QSTASH_CURRENT_SIGNING_KEY=your-current-signing-key
QSTASH_NEXT_SIGNING_KEY=your-next-signing-key

# Only needed for local development (provided by QStash CLI):
# QSTASH_URL=http://localhost:8080

